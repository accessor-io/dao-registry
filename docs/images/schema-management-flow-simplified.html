
<!DOCTYPE html>
<html>
<head>
    <title>Schema Management Process Flow</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .mermaid {
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>DAO Registry - Schema Management Process Flow</h1>
        <div class="mermaid">
            
graph TB
    Admin[Administrator] --> Init[Initialize Schema Creation]
    Init --> ValidateInput[Validate Input Parameters]
    ValidateInput --> CheckPermissions{Check Permissions}
    CheckPermissions -->|Authorized| ValidateSchema[Validate Schema Structure]
    CheckPermissions -->|Unauthorized| Error1[Error: Insufficient Permissions]
    
    ValidateSchema --> CheckFields{Validate Fields}
    CheckFields -->|Valid| CheckMetadata[Validate Metadata]
    CheckFields -->|Invalid| Error2[Error: Invalid Structure]
    
    CheckMetadata --> CheckPriority[Assign Priority Level]
    CheckPriority --> CRITICAL[CRITICAL: Core System]
    CheckPriority --> HIGH[HIGH: Important Operational]
    CheckPriority --> MEDIUM[MEDIUM: Standard Features]
    CheckPriority --> LOW[LOW: Optional Enhancements]
    
    CRITICAL --> StoreSchema[Store Schema]
    HIGH --> StoreSchema
    MEDIUM --> StoreSchema
    LOW --> StoreSchema
    
    StoreSchema --> UpdateStats[Update Statistics]
    UpdateStats --> EmitEvent[Emit SchemaDefined Event]
    
    EmitEvent --> QuerySystem[Query System]
    QuerySystem --> OnChainQuery[On-Chain Queries]
    QuerySystem --> OffChainQuery[Off-Chain API Queries]
    
    OnChainQuery --> GetSchema[Get Schema Definition]
    OffChainQuery --> GetSchema
    GetSchema --> FieldQuery[Field-Level Queries]
    
    FieldQuery --> UpdateProcess[Schema Update Process]
    UpdateProcess --> StoreOldVersion[Store Old Version]
    StoreOldVersion --> RemoveOldSchema[Remove Old Schema]
    RemoveOldSchema --> AddNewSchema[Add New Schema]
    AddNewSchema --> EmitUpdateEvent[Emit SchemaUpdated Event]
    
    EmitUpdateEvent --> AccessControl[Access Control]
    AccessControl --> Owner[Contract Owner]
    AccessControl --> Admin[Administrators]
    AccessControl --> Moderator[Moderators]
    AccessControl --> DataProvider[Data Providers]
    
    DataProvider --> CCIPIntegration[CCIP Integration]
    CCIPIntegration --> StandardizedData[Standardized Data]
    StandardizedData --> CrossChainQuery[Cross-Chain Apps]
    CrossChainQuery --> UnifiedDataLayer[Unified Data Layer]
    
    UnifiedDataLayer --> EventSystem[Event Logging]
    EventSystem --> Statistics[Statistics Tracking]
    Statistics --> ErrorHandling[Error Handling]
    ErrorHandling --> GasOptimization[Gas Optimization]
    GasOptimization --> ExternalIntegration[External Integration]
    ExternalIntegration --> ValidationSystem[Data Validation]
    ValidationSystem --> VersionControl[Version Control]
    VersionControl --> CategorySystem[Category System]
    CategorySystem --> FinalIntegration[Final Integration]
    FinalIntegration --> InteroperableApps[Interoperable Apps]
    
    Error1 --> ErrorHandling
    Error2 --> ErrorHandling
    
    classDef adminAction fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef validation fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef storage fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef integration fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef error fill:#ffebee,stroke:#c62828,stroke-width:2px
    
    class Admin,Init adminAction
    class ValidateInput,CheckPermissions,ValidateSchema,CheckFields,CheckMetadata,CheckPriority validation
    class StoreSchema,UpdateStats,EmitEvent,GetSchema,FieldQuery storage
    class CCIPIntegration,StandardizedData,CrossChainQuery,UnifiedDataLayer,ExternalIntegration integration
    class Error1,Error2 error

        </div>
    </div>
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });
    </script>
</body>
</html>
